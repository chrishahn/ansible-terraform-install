---
- name: Manage a test S3 bucket
  hosts: all
  become: yes
 
  tasks:
  - name: Apply the S3 terraform template
    terraform:
      project_path: /home/ec2-user/s3/
      state: planned
      plan_file: /home/ec2-user/s3/terraform.tfstate
    register: plan_output

  - name: Output terraform apply command and plan
    debug:
      msg: "{{ plan_output }}""

  - name: Pause for plan approval
    pause:
      prompt: "Types 'yes' to continue executing this plan"
    register: prompt_response

  - name: Output the prompted response
    debug:
      msg: "They entered yes!"
    when: prompt_response.user_input == "yes"